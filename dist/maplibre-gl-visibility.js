import U from"map-gl-utils";const defaultOptions={baseLayers:null,overLayers:null,opacityControl:false};class VisibilityControl{#map;#container;#baseLayersOption;#overLayersOption;#opacityControlOption;constructor(options){this.#baseLayersOption=options.baseLayers||defaultOptions.baseLayers;this.#overLayersOption=options.overLayers||defaultOptions.overLayers;this.#opacityControlOption=options.opacityControl||defaultOptions.opacityControl}#radioButtonControlAdd(sourceId){const initLayer=Object.keys(this.#baseLayersOption)[0];const radioButton=document.createElement("input");radioButton.setAttribute("type","radio");radioButton.id=sourceId;if(sourceId===initLayer){radioButton.checked=true;this.#map.U.show((layer=>layer.source===sourceId))}else{this.#map.U.hide((layer=>layer.source===sourceId))}this.#container.appendChild(radioButton);radioButton.addEventListener("change",(event=>{event.target.checked=true;this.#map.U.show((layer=>layer.source===sourceId));Object.keys(this.#baseLayersOption).map((source=>{if(source!==event.target.id){document.getElementById(source).checked=false;this.#map.U.hide((layer=>layer.source===source))}}))}));const sourceName=document.createElement("label");sourceName.htmlFor=sourceId;sourceName.appendChild(document.createTextNode(this.#baseLayersOption[sourceId]));this.#container.appendChild(sourceName)}#checkBoxControlAdd(value,key){const checkBox=document.createElement("input");checkBox.setAttribute("type","checkbox");checkBox.id=key[0].replace(" ","_");if(key[1]){checkBox.checked=true;this.#map.U.show(value)}else{this.#map.U.hide(value)}this.#container.appendChild(checkBox);checkBox.addEventListener("change",(event=>{if(event.target.checked){this.#map.U.show(value)}else{this.#map.U.hide(value)}}));const layersName=document.createElement("label");layersName.htmlFor=checkBox.id;layersName.appendChild(document.createTextNode(key[0]));this.#container.appendChild(layersName)}#rangeControlAdd(value){const range=document.createElement("input");range.type="range";range.min=0;range.max=100;range.value=100;this.#container.appendChild(range);range.addEventListener("input",(event=>{this.#map.U.setLineOpacity(value,Number(event.target.value/100))}))}#visibilityControlAdd(){this.#container=document.createElement("div");this.#container.className="maplibregl-ctrl maplibregl-ctrl-group";this.#container.id="visibility-control";if(this.#baseLayersOption){Object.keys(this.#baseLayersOption).map((source=>{const sourceId=source;const br=document.createElement("br");this.#radioButtonControlAdd(sourceId);this.#container.appendChild(br)}))}if(this.#baseLayersOption&&this.#overLayersOption){const hr=document.createElement("hr");this.#container.appendChild(hr)}if(this.#overLayersOption){this.#overLayersOption.forEach(((value,key)=>{const br=document.createElement("br");this.#checkBoxControlAdd(value,key);this.#container.appendChild(br);if(this.#opacityControlOption){this.#rangeControlAdd(value);this.#container.appendChild(br)}}))}}onAdd(map){U.init(map);this.#map=map;this.#visibilityControlAdd();return this.#container}onRemove(){this.#container.parentNode.removeChild(this.#container);this.#map=null}}export default VisibilityControl;